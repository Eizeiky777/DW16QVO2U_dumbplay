{"ast":null,"code":"import { UPDATETRANSACTION } from \"../constants/action-types\";\nimport { API, setAuthToken } from \"../config/api\"; //import moment from 'moment';\n\nexport const updateTransactionUser = (status, ids) => {\n  return {\n    type: UPDATETRANSACTION,\n    payload: async () => {\n      try {\n        setAuthToken(localStorage.getItem(\"token\"));\n        const {\n          data: {\n            data\n          }\n        } = await API.get(`/transaction/${ids}`);\n        const formData = new FormData();\n        formData.append(\"startDate\", data.startDate);\n        formData.append(\"dueDate\", data.dueDate);\n        formData.append(\"userId\", data.User.id);\n        formData.append(\"status\", status);\n        formData.append(\"attach\", data.attach); // console.log(data.attach)\n\n        const config = {\n          headers: {\n            \"content-type\": \"multipart/form-data\"\n          }\n        };\n        await API.patch(`/transaction/edit/${ids}`, formData, config);\n        const {\n          data: {\n            data: dataNew\n          }\n        } = await API.get('/transactions');\n        console.log(dataNew);\n        return dataNew;\n      } catch (error) {\n        if (error.response) {\n          const {\n            data,\n            status\n          } = error.response;\n          if (status > 399) throw data.error;\n        }\n      }\n    }\n  };\n};","map":{"version":3,"sources":["C:/1. Eizeiky/3. React/dumbways react/minggu_4 - Presentasi Final test/client/src/components/redux/actions/updateTransaction.js"],"names":["UPDATETRANSACTION","API","setAuthToken","updateTransactionUser","status","ids","type","payload","localStorage","getItem","data","get","formData","FormData","append","startDate","dueDate","User","id","attach","config","headers","patch","dataNew","console","log","error","response"],"mappings":"AAAA,SAASA,iBAAT,QAAkC,2BAAlC;AACA,SAASC,GAAT,EAAcC,YAAd,QAAkC,eAAlC,C,CACA;;AAEA,OAAO,MAAMC,qBAAqB,GAAG,CAACC,MAAD,EAASC,GAAT,KAAiB;AAClD,SAAO;AACHC,IAAAA,IAAI,EAAEN,iBADH;AAEHO,IAAAA,OAAO,EAAE,YAAY;AACrB,UAAI;AACAL,QAAAA,YAAY,CAAEM,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAF,CAAZ;AAEA,cAAM;AACFC,UAAAA,IAAI,EAAE;AAAEA,YAAAA;AAAF;AADJ,YAEE,MAAMT,GAAG,CAACU,GAAJ,CAAS,gBAAeN,GAAI,EAA5B,CAFd;AAIA,cAAMO,QAAQ,GAAG,IAAIC,QAAJ,EAAjB;AAEAD,QAAAA,QAAQ,CAACE,MAAT,CAAgB,WAAhB,EAA6BJ,IAAI,CAACK,SAAlC;AACAH,QAAAA,QAAQ,CAACE,MAAT,CAAgB,SAAhB,EAA2BJ,IAAI,CAACM,OAAhC;AACAJ,QAAAA,QAAQ,CAACE,MAAT,CAAgB,QAAhB,EAA0BJ,IAAI,CAACO,IAAL,CAAUC,EAApC;AACAN,QAAAA,QAAQ,CAACE,MAAT,CAAgB,QAAhB,EAA0BV,MAA1B;AACAQ,QAAAA,QAAQ,CAACE,MAAT,CAAgB,QAAhB,EAA0BJ,IAAI,CAACS,MAA/B,EAbA,CAcA;;AAEA,cAAMC,MAAM,GAAG;AACXC,UAAAA,OAAO,EAAE;AACL,4BAAgB;AADX;AADE,SAAf;AAMA,cAAMpB,GAAG,CAACqB,KAAJ,CAAW,qBAAoBjB,GAAI,EAAnC,EAAsCO,QAAtC,EAAgDQ,MAAhD,CAAN;AAEA,cAAM;AACFV,UAAAA,IAAI,EAAE;AAAEA,YAAAA,IAAI,EAAEa;AAAR;AADJ,YAEE,MAAMtB,GAAG,CAACU,GAAJ,CAAQ,eAAR,CAFd;AAIAa,QAAAA,OAAO,CAACC,GAAR,CAAYF,OAAZ;AACA,eAAOA,OAAP;AACH,OA9BD,CA8BE,OAAOG,KAAP,EAAc;AACZ,YAAIA,KAAK,CAACC,QAAV,EAAoB;AACpB,gBAAM;AAAEjB,YAAAA,IAAF;AAAQN,YAAAA;AAAR,cAAmBsB,KAAK,CAACC,QAA/B;AAEA,cAAIvB,MAAM,GAAG,GAAb,EAAkB,MAAMM,IAAI,CAACgB,KAAX;AACjB;AACJ;AACA;AAxCE,GAAP;AA0CH,CA3CM","sourcesContent":["import { UPDATETRANSACTION } from \"../constants/action-types\";\r\nimport { API, setAuthToken } from \"../config/api\";\r\n//import moment from 'moment';\r\n\r\nexport const updateTransactionUser = (status, ids) => {\r\n    return {\r\n        type: UPDATETRANSACTION,\r\n        payload: async () => {\r\n        try {\r\n            setAuthToken( localStorage.getItem(\"token\") );\r\n\r\n            const {\r\n                data: { data },\r\n                } = await API.get(`/transaction/${ids}`);\r\n\r\n            const formData = new FormData();\r\n            \r\n            formData.append(\"startDate\", data.startDate);\r\n            formData.append(\"dueDate\", data.dueDate);\r\n            formData.append(\"userId\", data.User.id);\r\n            formData.append(\"status\", status);\r\n            formData.append(\"attach\", data.attach);\r\n            // console.log(data.attach)\r\n\r\n            const config = {\r\n                headers: {\r\n                    \"content-type\": \"multipart/form-data\",\r\n                },\r\n            };\r\n            \r\n            await API.patch(`/transaction/edit/${ids}`, formData, config);\r\n                \r\n            const {\r\n                data: { data: dataNew },\r\n                } = await API.get('/transactions');\r\n\r\n            console.log(dataNew);\r\n            return dataNew;\r\n        } catch (error) {\r\n            if (error.response) {\r\n            const { data, status } = error.response;\r\n\r\n            if (status > 399) throw data.error;\r\n            }\r\n        }\r\n        },\r\n    };\r\n};\r\n"]},"metadata":{},"sourceType":"module"}